<div class="container">
    <h1>Signup</h1>

    <mat-card class="cardC">
        <mat-spinner *ngIf="isLoading"></mat-spinner>
        <form [formGroup]="registerForm" *ngIf="!isLoading" (ngSubmit)="onSubmit()">
            <mat-form-field appearance="outline">
                <mat-label>Enter username</mat-label>
                <input matInput #username type="text" formControlName="username" placeholder="Username" required>
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Enter email</mat-label>
                <input matInput #email type="email" formControlName="email" placeholder="E-Mail" required>
                <mat-error *ngIf="registerForm.hasError('email')">
                    Please enter a valid email address!
                </mat-error>
                <mat-error *ngIf="registerForm.hasError('required')">
                    Email is required!
                </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Enter password</mat-label>
                <input matInput [type]="hide ? 'password' : 'text'" formControlName="password" minlength="8"
                       placeholder="Password" #pass required>
                <button mat-icon-button type="button" matSuffix (click)="hide = !hide"
                        [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide">
                    <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
                </button>
                <mat-error *ngIf="registerForm.hasError('required')">
                    Password is required!
                </mat-error>
                <mat-error *ngIf="registerForm.hasError('minlength')">
                    Password must be at least 8 characters long!
                </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Confirm password</mat-label>
                <input matInput [type]="hide ? 'password' : 'text'" minlength="8" placeholder="Password" formControlName="passwordRepeat" #confirmPass required>
                <button mat-icon-button type="button" matSuffix (click)="hide = !hide"
                        [attr.aria-label]="'Hide password'" [attr.aria-pressed]="hide">
                    <mat-icon>{{hide ? 'visibility_off' : 'visibility'}}</mat-icon>
                </button>
                <mat-error *ngIf="registerForm.hasError('required')">
                    Please re-enter password!
                </mat-error>
                <mat-error *ngIf="registerForm.hasError('minlength')">
                    Password must be at least 8 characters long!
                </mat-error>
                <mat-hint id="hint-color"
                          *ngIf="pass.value!==confirmPass.value && !registerForm.hasError('required') && !registerForm.hasError('minlength')">
                    Both passwords must match!
                </mat-hint>
            </mat-form-field>

            <mat-card-actions class="buttonSpace">
                <div fxFlex>
                </div>
                <button mat-raised-button class="siCSS" routerLink="/register" type="submit">Register</button>
                <!-- <a mat-raised-button class="siCSS" type="button" routerLink="/register">Register</a> -->
            </mat-card-actions>
        </form>
    </mat-card>
</div>